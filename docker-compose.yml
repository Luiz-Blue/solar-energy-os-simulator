services:
  energy-plugin:
    build: ./plugin
    ports:
      - "5000:5000"
    networks:
      - energy-net

  process-a:
    build: ./consumer
    environment:
      - PROCESS_ID=process-a
    depends_on:
      - energy-plugin
    networks:
      - energy-net

  process-b:
    build: ./consumer
    environment:
      - PROCESS_ID=process-b
    depends_on:
      - energy-plugin
    networks:
      - energy-net

networks:
  energy-net:
    driver: bridge